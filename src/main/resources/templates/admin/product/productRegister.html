<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/adminDefaultLayout}">
    <head>
    	<title>
    		ìƒí’ˆ ë“±ë¡
    	</title>
    </head>
	<section layout:fragment="contents" class="contents mt-5">
			<article class="group-article ">
<!-- ìƒí’ˆ ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
				<div class="d-flex justify-content-center">
					<div class="col-6 group-btn-product-image-upload">
						<button class="btn-product-image-upload">
							<div class="mt-3">
								<span class="text-image-upload">
									ğŸ‘‡ğŸ‘‡<br>
									ìƒí’ˆ ì´ë¯¸ì§€<br>
									ë“±ë¡
								</span>
							</div>
						</button>
						<input id="imageProduct" type="file" class="input-file-upload-image" accept=".jpg, .png, .gif">
					</div>
		
	<!-- 
		name
		category
		price
		agePetProper
		imgProfile
	 -->				
					<div class="col-6 groups-input-register-product">
						<!-- name -->
						<div class="bg-secondary rounded d-flex justify-content-between py-3 px-3">
							<span class="h3 text-white col-4">
								ì œí’ˆëª…
							</span>
							<input id="nameProduct" type="text" class="form-control col-8">
						</div>
						<!-- category -->
						<div class="bg-secondary rounded d-flex justify-content-between py-3 px-3">
							<span class="h3 text-white col-4">
								ì¹´í…Œê³ ë¦¬
							</span>
							<div class="input-group p-0 col-8">
								<select id="categoryProduct" class="custom-select input-select-inside w-100 h-100" aria-label="Example select with button addon">
								    <option selected>--------</option>
								    <option value="ì‚¬ë£Œ">ì‚¬ë£Œ</option>
								    <option value="ê°„ì‹">ê°„ì‹</option>
								</select>
							</div>
						</div>
						<!-- price -->
						<div class="bg-secondary rounded d-flex justify-content-between py-3 px-3">
							<span class="h3 text-white col-4">
								ì œí’ˆ ê°€ê²©
							</span>
							<input id="priceProduct" type="text" class="form-control col-8">
						</div>
						<!-- agePetProper -->
						<div class="bg-secondary rounded d-flex justify-content-between py-3 px-3">
							<span class="h3 text-white col-4">
								ì„­ì·¨ ì ì • ì—°ë ¹
							</span>
							<div class="input-group p-0 col-8">
								<select class="custom-select input-select-inside w-100 h-100" id="agePetProperProduct" aria-label="Example select with button addon">
								    <option selected>--------</option>
								    <option value="1">ìƒí›„ 6ê°œì›” ë¯¸ë§Œ</option>
								    <option value="2">ì„±ê²¬</option>
								    <option value="3">ê³ ë ¹ê²¬</option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="d-flex justify-content-end">
					<button class="btn btn-danger btn-cancel-register mr-5">
						ì·¨ì†Œí•˜ê¸°
					</button>
					<button class="btn btn-primary btn-submit mr-5">
						ì œì¶œí•˜ê¸°
					</button>
				</div>			
			</article>
	</section>

	<th:block layout:fragment="script">
    	<script>
    		$(document).ready(function(){
    			$(".btn-product-image-upload").on('click', function(){
    				$("#imageProduct").click();
    			})// btn-pet-image-upload on click
    			
    			$("#imageProduct").on('change', function(e){
    				let file = e.target.files[0];
    				if(file == null){
    					$(this).val("");
    					return;
    				}
    				
    				let fileName = e.target.files[0].name;
    				console.log(fileName);
    			})// imagePet on Click
    			
    			$(".btn-submit").on('click', function(){
					let name = $("#nameProduct").val().trim();
					let category = $("#categoryProduct").val();
					let price = $("#priceProduct").val().trim();
					let agePetProper = $("#agePetProperProduct").val();
					let pathFile = $("#imageProduct").val();
    				
					if(!name){
						alert("ì œí’ˆëª…ì„ ê¸°ì¬í•´ ì£¼ì„¸ìš”.");
    					return;
					}
					if(!category){
						alert("ì œí’ˆ ì¹´ë°ê³ ë¦¬ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.");
						return;
					}
					if(!price){
						alert("ì œí’ˆ ì¹´ë°ê³ ë¦¬ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.");
						return;
					}
					if(!agePetProper){
						alert("ì œí’ˆ ì¹´ë°ê³ ë¦¬ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.");
						return;
					}

					let extension = pathFile.split(".").pop().toLowerCase();
					if(pathFile != "" && $.inArray(extension, ["jpg", "gif", "png"]) == -1){
    					alert("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
    					$("#pathFile").val("");
    					return;
    				}

					$.ajax({
						type: "POST"
    					, url: "/admin/product/register-product"
    					, data: formData
    					, enctype: 'multipart/form-data'
    					, processData: false
    					, contentType: false
    					
    					, success: function(data){
    						if(data.code == 200){
    							alert("ğŸ¶ğŸ¥°ë°˜ë ¤ê²¬ ì¶”ê°€ ë“±ë¡ ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤.");
    							location.href= "/admin/product/product-list-view";
    						} else {
    							alert(data.error_message);
    						}
    					}
    					, error: function(error){
    						alert("ìƒí’ˆ ë“±ë¡ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.")
    					}
					})
    			})
    			
    		})//document ready
    	
    	</script>
	</th:block>
	
</html>